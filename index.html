<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>React Idle</title>
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/prismjs@1.6.0/themes/prism-tomorrow.css"/>
    <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
      background: linear-gradient(to bottom, hsl(0, 0%, 100%) 400px, hsl(0, 0%, 95%) 500px);
      margin: 20px;
    }
    body > *:not(.nav) {
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
      box-sizing: border-box;
    }
    pre {
      color: hsl(0, 0%, 90%);
      background: hsl(0, 0%, 10%);
      padding: 10px;
      border-radius: 6px;
      margin-bottom: 0;
    }
    pre.render-js-code {
      border-bottom-right-radius: 0px;
      border-bottom-left-radius: 0px;
    }
    .render-js {
      background: white;
      border: 1px solid hsl(0, 0%, 10%);
      padding: 10px;
      border-bottom-right-radius: 6px;
      border-bottom-left-radius: 6px;
    }
    .render-js:after {
      clear: both;
    }
    h1 { text-transform: uppercase;}
    h1, h1 + p {
      text-align: center
    }
    h1 + p > img {
      box-shadow: 0px 2px 20px hsla(0, 0%, 0%, 0.25);
      border-radius: 50%;
    }
    code {
      font-family: "SF Mono", "Monaco", "Inconsolata", "Fira Mono", "Droid Sans Mono", "Source Code Pro", monospace;
    }
    button {
      margin: auto;
      border-radius: 8px;
      font-size: 150%;
      padding: 20px;
      border: none;
      background: hsl(0, 78%, 60%);
      color: white;
      text-transform: uppercase;
    }
    button:hover {
      background: hsl(0, 78%, 65%);
    }
    button:active {
      background: hsl(0, 78%, 58%);
    }
    button:disabled {
      opacity: 0.5;
    }
    .nav {
      display: flex;
      justify-content: space-between;
      font-size: 80%;
      background: hsl(0, 0%, 10%);
      color: white;
      margin: -20px -20px 0px -20px;
      padding: 10px;
      text-transform: uppercase;
    }
    .nav a {
      text-decoration: none;
      color: inherit;
      transition: color 200ms ease;
      display: inline-block;
    }
    .nav a:hover {
      color: hsl(0, 0%, 80%);
    }
    .external-links a:not(:last-child) {
      padding: 0 5px;
    }
    h2 {
      text-transform: uppercase;
      border-bottom: solid 1px #ccc;
      padding-bottom: 5px;
      margin-top: 50px;
    }
    h2, h3, h4 {
      position: relative;
    }
    h3 {
      margin-top: 2em;
      font-size: 125%;
    }

    .header-anchor {
      position: absolute;
      left: -1em;
      color: #ccc;
      text-decoration: none;
      font-weight: normal;
      font-size: 80%;
    }
    </style>
  </head>
  <body>
    <nav class="nav">
      <div>
        <a href="https://reacttraining.com">React Training</a> / React Idle
      </div>
      <div class="external-links">
        <a href="https://reacttraining.com">Workshops</a>
        <a href="http://reacttraining.us16.list-manage1.com/subscribe?u=47df8ab2101d1dd83353427fc&id=83f54bda60">Newsletter</a>
        <a href="https://twitter.com/reacttraining">Twitter</a>
        <a href="https://github.com/reacttraining/react-idle">Github</a>
      </div>
    </nav> <h1 id="react-idle"><a class="header-anchor" href="#react-idle" aria-hidden="true">#</a> React Idle</h1>
<p><img src="./logo.png" alt="logo"></p>
<h2 id="what"><a class="header-anchor" href="#what" aria-hidden="true">#</a> What?</h2>
<p>Notifies your app when the user is idle.</p>
<h2 id="why"><a class="header-anchor" href="#why" aria-hidden="true">#</a> Why?</h2>
<p>When the user is idle you can do things like preload some code-split bundles, download images that haven't been scrolled to, etc. Also useful to automatically log them out of a sensitive website.</p>
<h2 id="installation"><a class="header-anchor" href="#installation" aria-hidden="true">#</a> Installation</h2>
<pre><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> react-idle
<span class="token comment" spellcheck="true"># or</span>
yarn add react-idle
</code></pre>
<p>And then import it:</p>
<pre><code class="language-js"><span class="token comment" spellcheck="true">// using es modules</span>
<span class="token keyword">import</span> Idle <span class="token keyword">from</span> <span class="token string">'react-idle'</span>

<span class="token comment" spellcheck="true">// common.js</span>
<span class="token keyword">const</span> Idle <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'react-idle'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">default</span>

<span class="token comment" spellcheck="true">// AMD</span>
<span class="token comment" spellcheck="true">// I've forgotten but it should work.</span>
</code></pre>
<p>Or use script tags and globals.</p>
<pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://unpkg.com/react-idle<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
</code></pre>
<p>And then grab it off the global like so:</p>
<pre><code class="language-js"><span class="token keyword">const</span> Idle <span class="token operator">=</span> ReactIdle<span class="token punctuation">.</span><span class="token keyword">default</span>
</code></pre>
<h2 id="how"><a class="header-anchor" href="#how" aria-hidden="true">#</a> How?</h2>
<pre class="render-js-code"><code class="jsx"><span class="token comment" spellcheck="true">// import { Idle } from 'react-idle'</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token punctuation">:</span> Idle <span class="token punctuation">}</span> <span class="token operator">=</span> ReactIdle

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Idle</span>
    <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">{</span> idle <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span> idle <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
    <span class="token attr-name">render</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">{</span> idle <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>
        <span class="token punctuation">{</span>idle
          <span class="token operator">?</span> <span class="token string">"You are idle."</span>
          <span class="token punctuation">:</span> <span class="token string">"Stop doing stuff for 1 second."</span>
        <span class="token punctuation">}</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
    <span class="token punctuation">}</span></span>
  <span class="token punctuation">/></span></span>
<span class="token punctuation">)</span><span class="token punctuation">,</span> DOM_NODE<span class="token punctuation">)</span>
</code></pre>
<div id="render-uhbgtjq6a7o" class="render-js"></div>
<script type="text/babel">
(function() { var DOM_NODE = document.getElementById("render-uhbgtjq6a7o");
// import { Idle } from 'react-idle'
const { default: Idle } = ReactIdle

ReactDOM.render((
  <Idle
    onChange={({ idle }) => console.log({ idle })}
    render={({ idle }) =>
      <h1>
        {idle
          ? "You are idle."
          : "Stop doing stuff for 1 second."
        }
      </h1>
    }
  />
), DOM_NODE)

})()</script>

<h2 id="props"><a class="header-anchor" href="#props" aria-hidden="true">#</a> Props</h2>
<h3 id="render"><a class="header-anchor" href="#render" aria-hidden="true">#</a> <code>render</code></h3>
<p>Whatever you'd like to render in response to changes in user activity.</p>
<pre class="render-js-code"><code class="jsx"><span class="token comment" spellcheck="true">// import { Idle } from 'react-idle'</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token punctuation">:</span> Idle <span class="token punctuation">}</span> <span class="token operator">=</span> ReactIdle

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Idle</span> <span class="token attr-name">render</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">{</span> idle <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>
      <span class="token punctuation">{</span>idle
        <span class="token operator">?</span> <span class="token string">"*whistles*"</span>
        <span class="token punctuation">:</span> <span class="token string">"Woah what now?"</span>
      <span class="token punctuation">}</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
  <span class="token punctuation">}</span></span><span class="token punctuation">/></span></span>
<span class="token punctuation">)</span><span class="token punctuation">,</span> DOM_NODE<span class="token punctuation">)</span>
</code></pre>
<div id="render-lmvumnfm8d" class="render-js"></div>
<script type="text/babel">
(function() { var DOM_NODE = document.getElementById("render-lmvumnfm8d");
// import { Idle } from 'react-idle'
const { default: Idle } = ReactIdle

ReactDOM.render((
  <Idle render={({ idle }) =>
    <h1>
      {idle
        ? "*whistles*"
        : "Woah what now?"
      }
    </h1>
  }/>
), DOM_NODE)

})()</script>

<h3 id="timeout"><a class="header-anchor" href="#timeout" aria-hidden="true">#</a> <code>timeout</code></h3>
<p>How long before notifying that the user is idle in milliseconds.</p>
<pre class="render-js-code"><code class="jsx"><span class="token comment" spellcheck="true">// import { Idle } from 'react-idle'</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token punctuation">:</span> Idle <span class="token punctuation">}</span> <span class="token operator">=</span> ReactIdle

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Idle</span>
    <span class="token attr-name">timeout</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token number">2000</span><span class="token punctuation">}</span></span>
    <span class="token attr-name">render</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">{</span> idle <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>
        <span class="token punctuation">{</span>idle
          <span class="token operator">?</span> <span class="token string">"You are idle."</span>
          <span class="token punctuation">:</span> <span class="token string">"Stop doing stuff for 2 seconds."</span>
        <span class="token punctuation">}</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
    <span class="token punctuation">}</span></span>
  <span class="token punctuation">/></span></span>
<span class="token punctuation">)</span><span class="token punctuation">,</span> DOM_NODE<span class="token punctuation">)</span>
</code></pre>
<div id="render-427a0i1q938" class="render-js"></div>
<script type="text/babel">
(function() { var DOM_NODE = document.getElementById("render-427a0i1q938");
// import { Idle } from 'react-idle'
const { default: Idle } = ReactIdle

ReactDOM.render((
  <Idle
    timeout={2000}
    render={({ idle }) =>
      <h1>
        {idle
          ? "You are idle."
          : "Stop doing stuff for 2 seconds."
        }
      </h1>
    }
  />
), DOM_NODE)

})()</script>

<h3 id="onchange"><a class="header-anchor" href="#onchange" aria-hidden="true">#</a> <code>onChange</code></h3>
<p>Called whenever the user's activity state changes, a great time to change the owner component's state, or to kick off some imperative work like pre-fetching code-split bundles or images.</p>
<pre class="render-js-code"><code class="jsx"><span class="token comment" spellcheck="true">// import { Idle } from 'react-idle'</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token punctuation">:</span> Idle <span class="token punctuation">}</span> <span class="token operator">=</span> ReactIdle

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    cornifyLoaded<span class="token punctuation">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>

  preloadCornify <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span>
    script<span class="token punctuation">.</span>onload <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> cornifyLoaded<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    script<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'//www.cornify.com/js/cornify.js'</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  cornify <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">cornify_add</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>
        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>cornifyLoaded <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Idle</span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">{</span> idle<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>idle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">preloadCornify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span></span><span class="token attr-name">}</span><span class="token punctuation">/></span></span>
        <span class="token punctuation">)</span><span class="token punctuation">}</span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>
          <span class="token attr-name">disabled</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>cornifyLoaded<span class="token punctuation">}</span></span>
          <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>cornify<span class="token punctuation">}</span></span>
        <span class="token punctuation">></span></span>Make Some Happiness<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>App</span><span class="token punctuation">/></span></span><span class="token punctuation">,</span> DOM_NODE<span class="token punctuation">)</span>
</code></pre>
<div id="render-rluu288t26o" class="render-js"></div>
<script type="text/babel">
(function() { var DOM_NODE = document.getElementById("render-rluu288t26o");
// import { Idle } from 'react-idle'
const { default: Idle } = ReactIdle

class App extends React.Component {
  state = {
    cornifyLoaded: false
  }

  preloadCornify = () => {
    const script = document.createElement('script')
    script.onload = () => this.setState({ cornifyLoaded: true })
    script.src = '//www.cornify.com/js/cornify.js'
    document.body.appendChild(script)
  }

  cornify = () => {
    window.cornify_add()
  }

  render() {
    return (
      <div>
        {this.state.cornifyLoaded === false && (
          <Idle onChange={({ idle}) => {
            if (idle) {
              this.preloadCornify()
            }
          }}/>
        )}

        <button
          disabled={!this.state.cornifyLoaded}
          onClick={this.cornify}
        >Make Some Happiness</button>
      </div>
    )
  }
}

ReactDOM.render(<App/>, DOM_NODE)

})()</script>

<h3 id="events"><a class="header-anchor" href="#events" aria-hidden="true">#</a> <code>events</code></h3>
<p>The window events to listen for activity, defaults to <code>[ &quot;mousemove&quot;, &quot;mousedown&quot;, &quot;keydown&quot;, &quot;touchstart&quot;, &quot;scroll&quot; ]</code>.</p>
<h3 id="defaultidle"><a class="header-anchor" href="#defaultidle" aria-hidden="true">#</a> <code>defaultIdle</code></h3>
<p>You can start out as idle by passing <code>&lt;Idle defaultIdle={true}/&gt;</code>, by default it is false--assumes that loading the page initially is a user interation.</p>
<h2 id="legal"><a class="header-anchor" href="#legal" aria-hidden="true">#</a> Legal</h2>
<p>Released under MIT license.</p>
<p>Copyright © 2017-present React Training LLC</p>     <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script src="https://unpkg.com/react@15.6.1/dist/react.js"></script>
    <script src="https://unpkg.com/react-dom@15.6.1/dist/react-dom.js"></script>
    <script src="umd/react-idle.min.js"></script>
  </body>
</html>
